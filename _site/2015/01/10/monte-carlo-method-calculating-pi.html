<!DOCTYPE html><html lang="en" manifest="/manifest.appcache"> <!-- Magic. Do not touch! (c) 2011-2016 Maciej A. Czyzewski --><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="robots" content="index, follow, archive" /><meta name="referrer" content="always" /><title>Monte Carlo method, calculating π - Maciej A. Czyzewski on the Web</title><meta property="og:title" content="Monte Carlo method, calculating π" /><meta name="description" content="Monte Carlo methods/experiments are a class of computational algorithms that rely on repeated random sampling to compute their results." /><meta property="og:description" content="Monte Carlo methods/experiments are a class of computational algorithms that rely on repeated random sampling to compute their results." /><link rel="canonical" href="http://maciejczyzewski.me/2015/01/10/monte-carlo-method-calculating-pi.html" /><meta property="og:url" content="http://maciejczyzewski.me/2015/01/10/monte-carlo-method-calculating-pi.html" /><meta property="og:site_name" content="Maciej A. Czyzewski on the Web" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2015-01-10T08:05:02+01:00" /><link rel="next" href="http://maciejczyzewski.me/2015/01/12/sieve-of-atkin-finding-prime-numbers-faster.html" title="Sieve of Atkin, finding prime numbers faster" /><link rel="prev" href="http://maciejczyzewski.me/2015/01/01/happy-new-year.html" title="Happy new year!" /><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@_czyzewski" /><meta name="google-site-verification" content="HBawTMww3xGdm4ZIKokBD8_Bx3YudVqrv1PISdhnthE" /> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BlogPosting", "headline": "Monte Carlo method, calculating π", "datePublished": "2015-01-10T08:05:02+01:00", "description": "Monte Carlo methods/experiments are a class of computational algorithms that rely on repeated random sampling to compute their results.", "logo": "http://maciejczyzewski.me/assets/images/shortcuts/144.png", "url": "http://maciejczyzewski.me/2015/01/10/monte-carlo-method-calculating-pi.html" } </script><link type="application/atom+xml" rel="alternate" href="http://maciejczyzewski.me/feed.xml" title="Maciej A. Czyzewski on the Web" /><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic" /> <script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}}); </script> <script type="text/javascript" async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script><link media="all" rel="stylesheet" type="text/css" href="/assets/styles.css" /></head><line></line><header> <a href="/">Maciej A. Czyzewski</a> <a href="/archive">Archive</a> <a href="/research">Research</a> <a href="/projects">Projects</a> <a href="/talks">Talks</a> <a href="/about">About</a></header><main><article><h1>Monte Carlo method, calculating π</h1><hgroup> <span>Posted on <time datetime="">10 January 2015</time></span> <a href="https://twitter.com/share" class="twitter-share-button" data-via="_czyzewski" data-size="large">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></hgroup><div><p><strong>Monte Carlo methods/experiments</strong> are a class of computational algorithms that rely on repeated random sampling to compute their results.</p><p>These methods are most suited to calculation by a computer and tend to be used when it is unfeasible or impossible to compute an exact result with a deterministic algorithm.</p><h2 id="calculations">Calculations</h2><p>Now, we try to apply it to calculate an approximate value for π. Let’s start with the mathematical foundations of the problem.</p><p>The idea is to approximate an area by counting dots, which are randomly scattered over the area. We want to compare the number of dots located in a circle, to the whole field.</p><p><img src="https://lh3.googleusercontent.com/4Wcl9DDp6BAMLUD9o757hxTK8BNY8LOO3cr5P1Obaf7P0wSagPesxUCvngAHRukZBE_ZtPCtJ2YV0wKst51I9n944d9P_P8mfVtPhhQvILAxVEVzXCzmLxrBhrexQecrkH3VlqPDBKCeQ85gatFEqSqvvCkN0wqR-9I9MeV-RAo26_DWd3oftzh8rQ0Vhbvmmutg6R_1WzktSaniRb9SIhAkq2_j6amSdNhwqS-xJh8jzYMyHrfhX8GaSVx1t7RV0QJ3pZmcB6nYzkYViQIt_zSWxHo9_zUyizZYS8TwaT3GVvCm0n4nyeJE30VNhzjmuuHx60G-vrZVNa4AMMx--ZUKthyg_2JQF8BTwqfZeirgPqiKVCOTrEx7ORVWGAGPOyVUdZuf4acWLgMBvaQR_S-vkyvPisVD_gPP9xQjdj8iojxvm-13mpx6NXUzKK_nCrEYn2w3_9cAGWPQmyrJ26v2LCl4geW_WkkGa1-EmsrzQ-iE5izukVJrWU5jsETJy3Mtkr8eFQoRrw-V_n5cRT-Xc5OB8vcrXag07ObKuDeoLyapzfp8L890GoUagi1BiqY5MJWdlybSPNO49z0efn7aGk5yxtQ=w1040-h905-no" alt="Circle inside square" /></p><p>Using the relationship between these fields and knowing the formula for the area of the square and the circle, we get:</p><script type="math/tex; mode=display">\frac{A_{circle}}{A_{square}} = \frac{\pi r^2} {(2r)^2} = \frac{\pi r^2}{4r^2} = \frac{\pi}{4}</script><p>Therefore:</p><script type="math/tex; mode=display">\pi = 4 * \frac{A_{circle}}{A_{square}}</script><h2 id="implementation">Implementation</h2><figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>

<span class="k">def</span> <span class="nf">withinCircle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
  <span class="s">"""Checks whether a point is in a circle"""</span>
  <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">True</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">calculatePi</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="mi">100000</span><span class="p">):</span>
  <span class="s">"""Calculating Pi using random numbers"""</span>
  <span class="n">circleArea</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># The dots in a circle</span>
  <span class="n">squareArea</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># The dots in a square</span>

  <span class="c"># Random selection of dots</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">points</span><span class="p">):</span>
    <span class="c"># Coordinates of a random dot</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="c"># x-coordinate</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="c"># y-coordinate</span>

    <span class="c"># Checking whether the dot is inside the circle</span>
    <span class="k">if</span><span class="p">(</span><span class="n">withinCircle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
      <span class="n">circleArea</span> <span class="o">=</span> <span class="n">circleArea</span> <span class="o">+</span> <span class="mi">1</span> <span class="c"># Add it</span>

    <span class="c"># Is certainly in the square</span>
    <span class="n">squareArea</span> <span class="o">=</span> <span class="n">squareArea</span> <span class="o">+</span> <span class="mi">1</span> <span class="c"># Add it</span>

  <span class="c"># Our formula</span>
  <span class="k">return</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="n">circleArea</span> <span class="o">/</span> <span class="n">squareArea</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">my</span> <span class="o">=</span> <span class="n">calculatePi</span><span class="p">()</span>

  <span class="c"># Conclusions</span>
  <span class="k">print</span> <span class="s">"Approximate value for Pi:        "</span><span class="p">,</span> <span class="n">my</span>
  <span class="k">print</span> <span class="s">"Difference to exact value of Pi: "</span><span class="p">,</span> <span class="n">my</span> <span class="o">-</span> <span class="n">pi</span>
  <span class="k">print</span> <span class="s">"Error in percent:                "</span><span class="p">,</span> <span class="p">(</span><span class="n">my</span> <span class="o">-</span> <span class="n">pi</span><span class="p">)</span> <span class="o">/</span> <span class="n">pi</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s">"</span><span class="si">%</span><span class="s">"</span></code></pre></figure><h2 id="analysis">Analysis</h2><p><img src="https://lh3.googleusercontent.com/sMUPyBI7PUmZpebxp2iAyx4br-id8tgKzzMEOZlQlSFAUF4sunmxkr8LGHNqOB2iNpeocsistFKk5kJEetdYuWXSlXxDYlzU4-NjdPqBBHvpi-sF7zit_jQAUt17SMhfWhmz_AmaFVANYi5iZAefhMfTXljK1uRAFuPbU3qRrdZbSjpUaz3nhXmnbfJU2EhVw6XHYH47MSkWVHemfiDn3TD79oRIlt_e9zdNYozM_9RZY9f0P3Zl4iEGXFzq42bJdRqgvG3bY45I4T2BViTKcU-5b7txVq3eu8pOAUts1_UWLKZjTQcFUKR24V1D1Ke4Lw-rVJrT3Iq3wf_GpQkXorM_Z3nmZNpfTkIqKsirJgOMqGjRWi_qpFq2Vr207oBZqHutpd_Y7K2HKCi0CO2PtOlQb4Viy5Wp5A1p5y-k5KbBCYm_ZQURaVamEOpitHga4OgKs-tAjiFJSSjqPKBvC8U4EVGDQGpM2npeyFPsymWouB05AOcwn29hmZXPW4uIY4oT74GUAAomLCjtpwn3JbAZfr9XJu9fCQFB6SA4hYhBdRP0cVMr_ycQIWeurTNIqqwasXJXftNdnLqRXaGdwbCqwyhGQjU=w800-h600-no" alt="Monte Carlo method result" /></p><h2 id="results">Results</h2><div class="highlighter-rouge"><pre class="highlight"><code>Approximate value for Pi:         3.1424
Difference to exact value of Pi:  0.000807346410207
Error in percent:                 0.0256986343944 %
</code></pre></div><p><em>Risk analysis is part of every decision we make. We are constantly faced with uncertainty, ambiguity, and variability.</em></p></div><nav> <a href="/2015/01/01/happy-new-year.html"><p>« previus</p><span>Happy new year!</span> </a> <a href="/2015/01/12/sieve-of-atkin-finding-prime-numbers-faster.html"><p>next »</p><span>Sieve of Atkin, finding prime numbers faster</span> </a></nav></article></main><footer> (c) 2016 <a href="/feed.xml"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194 11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.985 2.194-2.196 2.194C.984 16 0 15.017 0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"/></svg></a></footer><script type="text/javascript">(function(e,t,n,r,i,s,o){e["GoogleAnalyticsObject"]=i;e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date;s=t.createElement(n),o=t.getElementsByTagName(n)[0];s.async=1;s.src=r;o.parentNode.insertBefore(s,o)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-55884794-1","auto");ga("send","pageview")</script></body></html>
